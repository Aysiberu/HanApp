<!doctype html>
<html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Forgot password</title></head>
<body style="font-family:Arial,Helvetica,sans-serif">
  <main style="max-width:720px;margin:40px auto;padding:20px;border:1px solid #ddd;border-radius:8px;background:#fff">
    <h1>Forgot password</h1>
    <p>Enter your email and we'll create a reset code (in production we'd email the code to you).
    </p>
    <form id="forgotForm">
      <label>Email <input id="forgotEmail" type="email" required></label>
      <div style="margin-top:12px"><button type="submit">Request reset code</button></div>
    </form>
    <div id="forgotMsg" style="color:#060;margin-top:8px;display:none"></div>
    <p style="margin-top:8px;color:#666">After you receive the code, use the <a href="reset_password.html">Reset password page</a> to set a new password.</p>
  </main>
  <script>
    document.getElementById('forgotForm').addEventListener('submit', async function(e){
      e.preventDefault(); const msg=document.getElementById('forgotMsg'); msg.style.display='none';
      const email=document.getElementById('forgotEmail').value.trim();
      try{ const res = await fetch('/api/forgot_password', { method:'POST', headers:{ 'Content-Type':'application/json' }, body: JSON.stringify({ email }) }); const body = await res.json(); if(!res.ok) throw new Error(body.error || 'Failed'); msg.style.display='block'; msg.style.color='#060'; msg.textContent = `Code generated (for testing): ${body.code}`; }catch(err){ msg.style.display='block'; msg.style.color='#a00'; msg.textContent = err.message || 'Error'; }
    });
  </script>
</body>
</html>